{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport * as React from 'react';\nimport RcSteps from 'rmc-steps';\nimport Icon from '../icon';\n\nvar Steps = function (_React$Component) {\n  _inherits(Steps, _React$Component);\n\n  function Steps() {\n    _classCallCheck(this, Steps);\n\n    return _possibleConstructorReturn(this, (Steps.__proto__ || Object.getPrototypeOf(Steps)).apply(this, arguments));\n  }\n\n  _createClass(Steps, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.componentDidUpdate();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (this.props.direction !== 'horizontal') {\n        return;\n      } // set tail's left position based on main's width for each step dynamically.\n\n\n      this.stepRefs.forEach(function (s) {\n        if (s.refs.tail) {\n          s.refs.tail.style.left = s.refs.main.offsetWidth / 2 + 'px';\n        }\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      this.stepRefs = [];\n      var _props = this.props,\n          children = _props.children,\n          status = _props.status,\n          size = _props.size;\n      var current = this.props.current; // flattern the array at first https://github.com/ant-design/ant-design-mobile/issues/934\n\n      var filterChildren = [];\n\n      if (children && children.length) {\n        children.forEach(function (item) {\n          if (React.isValidElement(item)) {\n            filterChildren.push(item);\n          }\n        });\n      }\n\n      var newChildren = React.Children.map(filterChildren, function (item, index) {\n        var className = item.props.className;\n\n        if (index < filterChildren.length - 1 && filterChildren[index + 1].props.status === 'error') {\n          className = className ? className + ' error-tail' : 'error-tail';\n        }\n\n        var icon = item.props.icon;\n\n        if (!icon) {\n          if (index < current) {\n            // 对应 state: finish\n            icon = 'check-circle-o';\n          } else if (index > current) {\n            // 对应 state: wait\n            icon = 'ellipsis';\n            className = className ? className + ' ellipsis-item' : 'ellipsis-item';\n          }\n\n          if (status === 'error' && index === current || item.props.status === 'error') {\n            icon = 'cross-circle-o';\n          }\n        }\n\n        icon = typeof icon === 'string' ? React.createElement(Icon, {\n          type: icon,\n          size: size === 'small' ? status === 'wait' ? 'xxs' : 'xs' : 'md'\n        }) : icon;\n        return React.cloneElement(item, {\n          icon: icon,\n          className: className,\n          ref: function ref(c) {\n            return _this2.stepRefs[index] = c;\n          }\n        });\n      });\n      return React.createElement(RcSteps, _extends({\n        ref: function ref(el) {\n          return _this2.stepsRef = el;\n        }\n      }, this.props), newChildren);\n    }\n  }]);\n\n  return Steps;\n}(React.Component);\n\nexport default Steps;\nSteps.Step = RcSteps.Step;\nSteps.defaultProps = {\n  prefixCls: 'am-steps',\n  iconPrefix: 'ant',\n  labelPlacement: 'vertical',\n  direction: 'vertical',\n  current: 0\n};","map":{"version":3,"sources":["D:/vscode/前端/react/my-project/node_modules/antd-mobile/es/steps/index.js"],"names":["_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","React","RcSteps","Icon","Steps","_React$Component","__proto__","Object","getPrototypeOf","apply","arguments","key","value","componentDidMount","componentDidUpdate","props","direction","stepRefs","forEach","s","refs","tail","style","left","main","offsetWidth","render","_this2","_props","children","status","size","current","filterChildren","length","item","isValidElement","push","newChildren","Children","map","index","className","icon","createElement","type","cloneElement","ref","c","el","stepsRef","Component","Step","defaultProps","prefixCls","iconPrefix","labelPlacement"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport * as React from 'react';\nimport RcSteps from 'rmc-steps';\nimport Icon from '../icon';\n\nvar Steps = function (_React$Component) {\n    _inherits(Steps, _React$Component);\n\n    function Steps() {\n        _classCallCheck(this, Steps);\n\n        return _possibleConstructorReturn(this, (Steps.__proto__ || Object.getPrototypeOf(Steps)).apply(this, arguments));\n    }\n\n    _createClass(Steps, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.componentDidUpdate();\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            if (this.props.direction !== 'horizontal') {\n                return;\n            }\n            // set tail's left position based on main's width for each step dynamically.\n            this.stepRefs.forEach(function (s) {\n                if (s.refs.tail) {\n                    s.refs.tail.style.left = s.refs.main.offsetWidth / 2 + 'px';\n                }\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            this.stepRefs = [];\n            var _props = this.props,\n                children = _props.children,\n                status = _props.status,\n                size = _props.size;\n\n            var current = this.props.current;\n            // flattern the array at first https://github.com/ant-design/ant-design-mobile/issues/934\n            var filterChildren = [];\n            if (children && children.length) {\n                children.forEach(function (item) {\n                    if (React.isValidElement(item)) {\n                        filterChildren.push(item);\n                    }\n                });\n            }\n            var newChildren = React.Children.map(filterChildren, function (item, index) {\n                var className = item.props.className;\n                if (index < filterChildren.length - 1 && filterChildren[index + 1].props.status === 'error') {\n                    className = className ? className + ' error-tail' : 'error-tail';\n                }\n                var icon = item.props.icon;\n                if (!icon) {\n                    if (index < current) {\n                        // 对应 state: finish\n                        icon = 'check-circle-o';\n                    } else if (index > current) {\n                        // 对应 state: wait\n                        icon = 'ellipsis';\n                        className = className ? className + ' ellipsis-item' : 'ellipsis-item';\n                    }\n                    if (status === 'error' && index === current || item.props.status === 'error') {\n                        icon = 'cross-circle-o';\n                    }\n                }\n                icon = typeof icon === 'string' ? React.createElement(Icon, { type: icon, size: size === 'small' ? status === 'wait' ? 'xxs' : 'xs' : 'md' }) : icon;\n                return React.cloneElement(item, {\n                    icon: icon,\n                    className: className,\n                    ref: function ref(c) {\n                        return _this2.stepRefs[index] = c;\n                    }\n                });\n            });\n            return React.createElement(\n                RcSteps,\n                _extends({ ref: function ref(el) {\n                        return _this2.stepsRef = el;\n                    } }, this.props),\n                newChildren\n            );\n        }\n    }]);\n\n    return Steps;\n}(React.Component);\n\nexport default Steps;\n\nSteps.Step = RcSteps.Step;\nSteps.defaultProps = {\n    prefixCls: 'am-steps',\n    iconPrefix: 'ant',\n    labelPlacement: 'vertical',\n    direction: 'vertical',\n    current: 0\n};"]},"metadata":{},"sourceType":"module"}